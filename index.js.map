{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\n\nimport axios from \"axios\";\n\n\nconst API_KEY = \"54654326-693c693fec20ccb1a66ef61d3\";\n\nexport async function getImagesByQuery(query, page) {\n    const URL = \"https://pixabay.com/api/\";\n  \n   try {\n     const response = await axios.get(URL, {\n        params: {\n            key: API_KEY,\n            q: query,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            page: page,\n            per_page: 15,\n        }\n    });\n        console.log(\"photo:\", response.data);\n        return response.data;\n       \n     \n   } catch(error) {\n    console.log(error)\n   }\n}\n","\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\nconst loadBtn = document.querySelector(\".load-more\")\nconst loader = document.querySelector(\".loader\");\n\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nexport function createGallery(images){\n      const markup = images.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) =>`\n    <li class=\"list\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n            class=\"gallery-image\"\n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n            />\n        </a>\n         <div class=\"stats\">\n                <p>‚ù§Ô∏è –í–ø–æ–¥–æ–±–∞–π–æ–∫: ${likes}</p>\n                <p>üëÅÔ∏è –ü–µ—Ä–µ–≥–ª—è–¥—ñ–≤: ${views}</p>\n                <p>üí¨ –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤: ${comments}</p>\n                <p>‚¨áÔ∏è –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å: ${downloads}</p>\n            </div>\n    </li> \n\n    `).join(\"\");\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n    console.log(\"‚úÖ –ì–∞–ª–µ—Ä–µ—è —Å—Ç–≤–æ—Ä–µ–Ω–∞!\");\n}\nexport function clearGallery() {\n    gallery.innerHTML = \"\";\n};\nexport function showLoader() {\n    loader.classList.add('is-visible');\n\n};\nexport function hideLoader(){\n    loader.classList.remove('is-visible');\n\n}\nexport function showLoadMoreButton() {\n    loadBtn.classList.add(\"visible\");\n }\n \n //–¶—è —Ñ—É–Ω–∫—Ü—ñ—è –Ω—ñ—á–æ–≥–æ –Ω–µ –ø—Ä–∏–π–º–∞—î, –ø–æ–≤–∏–Ω–Ω–∞ –¥–æ–¥–∞–≤–∞—Ç–∏ –∫–ª–∞—Å –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–Ω–æ–ø–∫–∏ Load more. \n // –ù—ñ—á–æ–≥–æ –Ω–µ –ø–æ–≤–µ—Ä—Ç–∞—î.\n\n\nexport function hideLoadMoreButton() {\n    loadBtn.classList.remove('visible')\n }\n\n\n // –¶—è —Ñ—É–Ω–∫—Ü—ñ—è –Ω—ñ—á–æ–≥–æ –Ω–µ –ø—Ä–∏–π–º–∞—î, –ø–æ–≤–∏–Ω–Ω–∞ –ø—Ä–∏–±–∏—Ä–∞—Ç–∏ –∫–ª–∞—Å\n //  –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–Ω–æ–ø–∫–∏ Load more. –ù—ñ—á–æ–≥–æ –Ω–µ –ø–æ–≤–µ—Ä—Ç–∞—î.","\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// –Ü–º–ø–æ—Ä—Ç—É—î–º–æ –Ω–∞—à—ñ —Ñ—É–Ω–∫—Ü—ñ—ó\nimport { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions.js\";\n\nconst form = document.querySelector(\".form\");\nconst input = form.querySelector(\"input\");\nconst loadMore = document.querySelector(\".load-more\");\nloadMore.addEventListener(\"click\", onLoadMore)\n\nform.addEventListener(\"submit\", handleSubmit);\n\n\nlet page = 1;\nlet query = \"\";\n\nasync function onLoadMore() {\n    page++;\n  \n    console.log(\"—Ç—É—Ç –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–ª—ñ–∫—ñ–≤ –Ω–∞ –∫–Ω–æ–ø–∫—É:\", page);\n    showLoader();\n    hideLoadMoreButton();\n    try {\n        const data = await getImagesByQuery(query, page);\n        const { hits: images, totalHits } = data; // –æ—Ç—Ä–∏–º—É—î–º–æ images —ñ totalHits\n        //console.log(data);\n        createGallery(images);\n        checkLoadMoreVisibility(totalHits);\n        \n        // –æ—Ç—Ä–∏–º—É—î–º–æ –≤–∏—Å–æ—Ç—É –ø–µ—Ä—à–æ—ó –∫–∞—Ä—Ç–∫–∏\n        const card = document.querySelector(\".list\");\n        const cardHeight = card.getBoundingClientRect().height;\n\n        // –ø—Ä–æ–∫—Ä—É—á—É—î–º–æ –Ω–∞ –¥–≤—ñ –≤–∏—Å–æ—Ç–∏ –∫–∞—Ä—Ç–∫–∏\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\"\n        });\n       \n\n    } catch (error){\n        iziToast.error({\n            message:`We're sorry, but you've reached the end of search results.`,\n            position: 'topRight',\n        })\n    } finally {\n        hideLoader();\n       \n    }\n}\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    query = form.querySelector(\"input\").value.trim().toLowerCase(); \n    page = 1; // ‚úÖ —Å–∫–∏–¥–∞—î–º–æ —Å—Ç–æ—Ä—ñ–Ω–∫—É –ø—Ä–∏ –Ω–æ–≤–æ–º—É –ø–æ—à—É–∫—É  \n   \n    if (!query){\n        iziToast.error({\n            message:`This field cannot be empty. Please fill out this field.`,\n            position: 'topRight',\n        })\n        return\n    }\n    \n    \n    clearGallery(); // –û—á–∏—â–∞—î–º–æ –≥–∞–ª–µ—Ä–µ—é –ø–µ—Ä–µ–¥ –Ω–æ–≤–∏–º –ø–æ—à—É–∫–æ–º\n    hideLoadMoreButton();\n    showLoader(); // –ü–û–ö–ê–ó–£–Ñ–ú–û –∫—Ä—É—Ç–∏–ª–∫—É\n\n   \n    try {\n    \n        const data = await getImagesByQuery(query, page);\n        const { hits: images, totalHits } = data; // ‚úÖ –≤–∏—Ç—è–≥—É—î–º–æ –æ–±–∏–¥–≤–∞\n     if (images.length === 0){\n        iziToast.error({\n            message: `Sorry, there are no images matching your search query. Please try again!`,\n            position: 'topRight',\n        })\n        return;\n\n     } \n     //console.log(\"–ó–Ω–∞–π–¥–µ–Ω–æ –∑–æ–±—Ä–∞–∂–µ–Ω—å:\", images.length);\n     createGallery(images);\n     checkLoadMoreVisibility(totalHits);\n     \n    \n    \n          \n    } catch (error) {\n        console.log(error);\n        iziToast.error({\n            message: \"–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–ø–∏—Ç—ñ\",\n            position: \"topRight\",\n        });\n  \n  } finally {\n        hideLoader();\n        form.reset();\n    }\n}\n\nfunction checkLoadMoreVisibility(totalHits) {\n    if (page * 15 >= totalHits) {\n        hideLoadMoreButton();\n        iziToast.info({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight',\n        });\n    } else {\n        showLoadMoreButton();//—â–µ —î –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è\n    }\n}\n\n"],"names":["API_KEY","getImagesByQuery","query","page","URL","response","axios","error","gallery","loadBtn","loader","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","loadMore","onLoadMore","handleSubmit","data","totalHits","checkLoadMoreVisibility","cardHeight","iziToast","event"],"mappings":"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"}